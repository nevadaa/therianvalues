<head>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
    <link href='style.css' rel='stylesheet' type='text/css'>
    <title>TherianValues Results</title>
    <link rel="icon" type="x-icon" href="icon.png">
    <link rel="shortcut icon" type="x-icon" href="icon.png">
    <meta charset="utf-8">
    <script>
      version = "Test Edition #1" //Remember to update this before making changes to the test itself!
    </script>
    </head>
    <script type="application/javascript"
            src="ideologies.js">
    </script>
    
    <body>
    <h1>TherianValues</h1>
    <hr>
    
    <h1>Results</h1>
    
    <h2>Metaphysics Axis: <span class="weight-300" id="metaphysics-label"></span></h2>''
    <div class="axis">
        <img id="img-spiritual" src="value_images/Spiritual.png" height="128pt"/>
        <div class="bar spiritual" id="bar-spiritual"><div class="text-wrapper-invert" id="spiritual"></div></div>
        <div class="bar secular" id="bar-secular"><div class="text-wrapper" id="secular"></div></div>
        <img id="img-secular" src="value_images/Secular.png" height="128pt"/>
    </div>
    <h2>Self-Image Axis: <span class="weight-300" id="selfimage-label"></span></h2>
    <div class="axis">
        <img id="img-ideal" src="value_images/Ideal.png" height="128pt"/>
        <div class="bar ideal" id="bar-ideal"><div class="text-wrapper" id="ideal"></div></div>
        <div class="bar morphological" id="bar-morphological"><div class="text-wrapper" id="morphological"></div></div>
        <img id="img-morphological" src="value_images/Morphological.png" height="128pt"/>
    </div>
    <h2>Identity Axis: <span class="weight-300" id="identity-label"></span></h2>
    <div class="axis">
        <img id="img-inhuman" src="value_images/Inhuman.png" height="128pt"/>
        <div class="bar inhuman" id="bar-inhuman"><div class="text-wrapper" id="inhuman"></div></div>
        <div class="bar alterhuman" id="bar-alterhuman"><div class="text-wrapper" id="alterhuman"></div></div>
        <img id="img-alterhuman" src="value_images/Alterhuman.png" height="128pt"/>
    </div>
    <h2>Community Axis: <span class="weight-300" id="community-label"></span></h2>
    <div class="axis">
        <img id="img-rewilding" src="value_images/Rewilding.png" height="128pt"/>
        <div class="bar rewilding" id="bar-rewilding"><div class="text-wrapper" id="rewilding"></div></div>
        <div class="bar synthesis" id="bar-synthesis"><div class="text-wrapper" id="synthesis"></div></div>
        <img id="img-synthesis" src="value_images/synthesis.png" height="128pt"/>
    </div>
    <h2>Society Axis: <span class="weight-300" id="society-label"></span></h2>
    <div class="axis">
        <img id="img-assimilation" src="value_images/assimilation.png" height="128pt"/>
        <div class="bar assimilation" id="bar-assimilation"><div class="text-wrapper-invert" id="assimilation"></div></div>
        <div class="bar liberation" id="bar-liberation"><div class="text-wrapper" id="liberation"></div></div>
        <img id="img-liberation" src="value_images/liberation.png" height="128pt"/>
    </div>
   <hr/>
    <img src="" id="banner">
    <button class="button" onclick="location.href='index.html';">Back</button> <br>
    <script>
        function getQueryVariable(variable)
        {
               var query = window.location.search.substring(1)
               var vars = query.split("&")
               for (var i=0;i<vars.length;i++) {
                       var pair = vars[i].split("=")
                       if(pair[0] == variable) {return pair[1]}
               }
               return(NaN);
        }
    
        function setBarValue(name, value) {
            innerel = document.getElementById(name)
            outerel = document.getElementById("bar-" + name)
            outerel.style.width = (value + "%")
            innerel.innerHTML = (value + "%")
            if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
                innerel.style.visibility = "hidden"
            }
        }
    
        metaphysicsArray = ["Anti-Scientific","Religious","Spiritual","Agnostic","Atheist","Scientific","Science-Obsessed"]
        selfimgArray = ["Card-Carrying FFF Member","Biohacker","Transformative","Balanced","Romanticist","Distant","Self-Hating"]
        identityArray = ["Eldritch","Voidpunk Afficionado","Voidpunk","Slightly Odd","Grounded","Earthly","Humanoid"]
        communityArray = ["Technocultist","Posthumanist","Civilized","Technogaian","Ecological","Deep Ecology","Feral Primalism"]
        societyArray = ["Collaborationist","Human-Friendly","Intermingler","Neutral","Autonomous Communes","Secession","Total Separation"]
        
        function setLabel(val,ary) {
            if (val > 100) { return "" } else
            if (val > 90) { return ary[0] } else
            if (val > 75) { return ary[1] } else
            if (val > 60) { return ary[2] } else
            if (val >= 40) { return ary[3] } else
            if (val >= 25) { return ary[4] } else
            if (val >= 10) { return ary[5] } else
            if (val >= 0) { return ary[6] } else
                {return ""}
        }
    
        spiritual  = getQueryVariable("secular")
        morphological     = getQueryVariable("ideal")
        inhuman   = getQueryVariable("alterhuman")
        synthesis  = getQueryVariable("rewilding")
        liberation  = getQueryVariable("assimilation")
        secular    = (100 - spiritual).toFixed(1)
        ideal     = (100 - morphological   ).toFixed(1)
        alterhuman = (100 - inhuman ).toFixed(1)
        rewilding = (100 - synthesis).toFixed(1)
        assimilation = (100 - liberation).toFixed(1)
    
        setBarValue("spiritual", spiritual)
        setBarValue("secular", secular)
        setBarValue("morphological", morphological)
        setBarValue("ideal", ideal)
        setBarValue("inhuman", inhuman)
        setBarValue("alterhuman", alterhuman)
        setBarValue("synthesis", synthesis)
        setBarValue("rewilding", rewilding)
        setBarValue("assimilation", assimilation)
        setBarValue("liberation", liberation)
    
        document.getElementById("metaphysics-label").innerHTML = setLabel(spiritual, metaphysicsArray)
        document.getElementById("selfimage-label").innerHTML = setLabel(morphological, selfimgArray)
        document.getElementById("identity-label").innerHTML = setLabel(inhuman, identityArray)
        document.getElementById("community-label").innerHTML = setLabel(synthesis, communityArray)
        document.getElementById("society-label").innerHTML = setLabel(assimilation, societyArray)
    
        window.onload = function() {
            var c = document.createElement("canvas")
            var ctx = c.getContext("2d")
            c.width = 800;
            c.height = 800;
            ctx.fillStyle = "#EEEEEE"
            ctx.fillRect(0,0,800,800);
    
            img = document.getElementById("img-spiritual")
            ctx.drawImage(img, 20, 170, 100, 100);
            img = document.getElementById("img-secular")
            ctx.drawImage(img, 680, 170, 100, 100)
            img = document.getElementById("img-ideal")
            ctx.drawImage(img, 20, 290, 100, 100)
            img = document.getElementById("img-morphological")
            ctx.drawImage(img, 680, 290, 100, 100)
            img = document.getElementById("img-inhuman")
            ctx.drawImage(img, 20, 410, 100, 100)
            img = document.getElementById("img-alterhuman")
            ctx.drawImage(img, 680, 410, 100, 100)
            img = document.getElementById("img-rewilding")
            ctx.drawImage(img, 20, 530, 100, 100)
            img = document.getElementById("img-synthesis")
            ctx.drawImage(img, 680, 530, 100, 100)
            img = document.getElementById("img-assimilation")
            ctx.drawImage(img, 20, 650, 100, 100)
            img = document.getElementById("img-liberation")
            ctx.drawImage(img, 680, 650, 100, 100)
    
            ctx.fillStyle="#222222"
            ctx.fillRect(120, 180, 560, 80)
            ctx.fillRect(120, 300, 560, 80)
            ctx.fillRect(120, 420, 560, 80)
            ctx.fillRect(120, 540, 560, 80)
            ctx.fillRect(120, 660, 560, 80)
            ctx.fillStyle="#D8FFB8"
            ctx.fillRect(120, 184, 5.6*spiritual-2, 72)
            ctx.fillStyle="#CC86EF"
            ctx.fillRect(682-5.6*secular, 184, 5.6*secular-2, 72)
            ctx.fillStyle="#073972"
            ctx.fillRect(120, 304, 5.6*ideal-2, 72)
            ctx.fillStyle="#E2BC00"
            ctx.fillRect(682-5.6*morphological, 304, 5.6*morphological-2, 72)
            ctx.fillStyle="#8C175B"
            ctx.fillRect(120, 424, 5.6*inhuman-2, 72)
            ctx.fillStyle="#597BC2"
            ctx.fillRect(682-5.6*alterhuman, 424, 5.6*alterhuman-2, 72)
            ctx.fillStyle="#0BA100"
            ctx.fillRect(120, 544, 5.6*rewilding-2, 72)
            ctx.fillStyle="#8800FF"
            ctx.fillRect(682-5.6*synthesis, 544, 5.6*synthesis-2, 72)
            ctx.fillStyle="#00F7FF"
            ctx.fillRect(120, 664, 5.6*assimilation-2, 72)
            ctx.fillStyle="#FF0800"
            ctx.fillRect(682-5.6*liberation, 664, 5.6*liberation-2, 72)
            ctx.fillStyle="#222222"
            ctx.font="700 32px Montserrat"
            ctx.textAlign="left"
            ctx.fillText("TherianValues", 20, 100)
            ctx.font="32px Montserrat"
    
            ctx.textAlign="left"
            if (spiritual  > 30) {ctx.fillText(spiritual + "%", 130, 237.5)}
            if (ideal > 30) {ctx.fillText(ideal + "%", 130, 357.5)}
            if (inhuman   > 30) {ctx.fillText(inhuman + "%", 130, 477.5)}
            if (rewilding > 30) {ctx.fillText(rewilding + "%", 130, 597.5)}
            ctx.textAlign="right"
            if (secular > 30) {ctx.fillText(secular + "%", 670, 237.5)}
            if (morphological > 30) {ctx.fillText(morphological + "%", 670, 357.5)}
            if (alterhuman > 30) {ctx.fillText(alterhuman + "%", 670, 477.5)}
            if (synthesis > 30) {ctx.fillText(synthesis + "%", 670, 597.5)}
    
            ctx.font="300 30px Montserrat"
            ctx.fillText("https://nevadaa.github.io/therianvalues", 780, 60)
            ctx.fillText(version, 780, 90)
            ctx.textAlign="center"
            ctx.fillText("Metaphysics Axis: " + document.getElementById("metaphysics-label").innerHTML, 400, 175)
            ctx.fillText("Self-Image Axis: " + document.getElementById("selfimage-label").innerHTML, 400, 295)
            ctx.fillText("Identity Axis: " + document.getElementById("identity-label").innerHTML, 400, 415)
            ctx.fillText("Community Axis: " + document.getElementById("community-label").innerHTML, 400, 535)
            ctx.fillText("Society Axis: " + document.getElementById("society-label").innerHTML, 400, 655)
    
            document.getElementById("banner").src = c.toDataURL();
        }
        function createImage(src, x, y, w, h) {
            img = new Image ()
            img.src = src
            img.onLoad = function() {
                ctx.drawImage(img, x, y, w, h)
            }
        }
    
        </script>
    </body>
    